function onCreate()
    makeAnimatedLuaSprite('jenfake', 'characters/Random_ass_characters/jenny', 480,750)
    setObjectCamera('jenfake', 'other')
    addAnimationByPrefix('jenfake','up', 'up', 24,false);
    addAnimationByPrefix('jenfake','right', 'right', 24,false);
    scaleObject('jenfake', 0.9, 0.9)
    addLuaSprite('jenfake')


    makeAnimatedLuaSprite('jenfake2', 'characters/Random_ass_characters/jenny', 1300,50)
    setObjectCamera('jenfake2', 'other')
    addAnimationByPrefix('jenfake2','left', 'left', 24,false);
    addAnimationByPrefix('jenfake2','down', 'down', 24,false);
    scaleObject('jenfake2', 0.9, 0.9)
    addLuaSprite('jenfake2')


    makeAnimatedLuaSprite('jenanim', 'special_Anims/jenny-laugh')
    addAnimationByPrefix('jenanim','dialogue', 'laugh', 24,false);
    scaleObject('jenanim', 1.1, 1.1)
    setProperty('jenanim.offset.x',10)
    setProperty('jenanim.offset.y',-22)
    addLuaSprite('jenanim',true)
end

function onCreatePost()
    setProperty('camGame.alpha', 0)
    setProperty('camHUD.alpha', 0)

    setProperty('jenfake.alpha',0)
    setProperty('jenfake2.alpha',0)

    setProperty('jenanim.x',getProperty('dad.x'))
    setProperty('jenanim.y',getProperty('dad.y'))
    setProperty('jenanim.visible',false)
end


function opponentNoteHit(id, dir, noteType, isSustainNote)
    if noteType == 'No Animation' and curStep <= 512 then
        if dir == 0 then

            playAnim('jenfake2','left',true)

        elseif dir == 1 then

            playAnim('jenfake2','down',true)

        elseif dir == 2 then

            playAnim('jenfake','up',true)

        elseif dir == 3 then

            playAnim('jenfake','right',true)

        end
    end
end



local hideHud = {'iconP1', 'iconP2', 'scoreTxt', 'healthBar', 'healthBarBG', 'timeBar', 'timeBarBG', 'timeTxt','bg','HM','HL','HR','LeavesL','LeavesR','Tiff','Brit','killgore'}
function onEvent(n,v1,v2)
    if n == 'camera_target' then
        if v1 == 'all' then
            folowcam = true
        else
            folowcam = false
        end
    end

    if n == 'hud' then
        for i = 1,#hideHud do
            if v1 == '1' then
            setProperty(hideHud[i]..'.visible', false)
            else
            setProperty(hideHud[i]..'.visible', true)
            end
        end
    end

    if n == 'GBG' then
        if v1 == 'on' then
            triggerEvent('hud','1')
            else
            triggerEvent('hud',0)

        end
    end
end


folowcam = false
camX = 1400
camY = 800
function onUpdate()
    if folowcam then
        setProperty('camFollow.x', camX)
        setProperty('camFollow.y', camY)
    end
end

function onStepHit()
    if curStep == 1 then
        setProperty('camGame.alpha', 1)

    elseif curStep == 128 then
        doTweenAlpha('1','camHUD',1,1)
        beat = 1

    elseif curStep == 384 then
        beat = 0

    elseif curStep == 476 then
        doTweenAlpha('1','camHUD',0,0.2)
        doTweenAlpha('2','camGame',0,0.2)

    elseif curStep == 480 then
        doTweenAlpha('1','jenfake',0.5,0.5,'quadOut')
        doTweenY('2','jenfake',-100,0.5,'quadOut')

    elseif curStep == 484 then
        doTweenAlpha('3','jenfake2',0.5,0.5,'quadOut')
        doTweenX('4','jenfake2',-100,0.5,'quadOut')

    elseif curStep == 488 then
        doTweenY('5','jenfake',-200,0.3,'quadIn')
        doTweenAlpha('6','jenfake',0,0.3,'quadIn')

    elseif curStep == 492 then
        setProperty('jenfake.x',-300)
        setProperty('jenfake.y',200)
        doTweenX('7','jenfake',700,0.5,'quadOut')
        doTweenAlpha('8','jenfake',0.5,0.5,'quadOut')

    elseif curStep == 496 then
        doTweenAlpha('9','jenfake2',0,0.3,'quadIn')
        doTweenX('10','jenfake2',-500,0.3,'quadIn')
        setProperty('jenfake2.velocity.x', 20)

    elseif curStep == 504 then
        setProperty('jenfake2.x',280)
        setProperty('jenfake2.y',-750)
        doTweenY('11','jenfake2',100,0.5,'quadOut')
        doTweenAlpha('12','jenfake2',0.5,0.5,'quadOut')
        doTweenAlpha('13','camHUD',1,0.5,'sineInOut')

        doTweenX('14','jenfake',1300,0.3,'quadIn')
        doTweenAlpha('15','jenfake',0,0.3,'quadIn')

    elseif curStep == 512 then
        removeLuaSprite('jenfake',true)
        removeLuaSprite('jenfake2',true)
        setProperty('camGame.alpha',1)
        beat = 2

    elseif curStep == 624 or curStep == 880 then
        beat = 0

    elseif curStep == 640 then
        beat = 2

    elseif curStep == 896 then
        beat = 1

    elseif curStep == 1152 then
        beat = 0
        playAnim('jenanim','dialogue',true)
        setProperty('jenanim.visible',true)
        setProperty('dad.visible',false)


    elseif curStep == 1184 then
        setProperty('dad.visible',true)
        removeLuaSprite('jenanim',true)
        beat = 1

        setProperty('idfk.visible',true)
        setProperty('smytus.visible',true)
        setProperty('Glen.visible',true)
        setProperty('krakus.visible',true)
        setProperty('tiger.visible',true)
        setProperty('skinsuit.visible',true)
    elseif curStep == 1199 then
        setProperty('cameraSpeed', 0.1)
        camY = 900
    elseif curStep == 1704 then
        folowcam = true
        camX = 900
        camY = 600


    end
end


beat = 0
turn = false
function onBeatHit()
    if curBeat %2 == 1 and beat == 1 then
        turn = (turn == true and false or turn == false and true)
        setProperty('camGame.angle', (turn == true and -3 or 3))
        setProperty('camHUD.angle',(turn == true and -3 or 3))

        doTweenAngle('ang1','camGame',0,1,'expoOut')
        doTweenAngle('ang2','camHUD',0,1,'expoOut')

    elseif curBeat %4 == 2 and beat == 2 then
        turn = (turn == true and false or turn == false and true)
        setProperty('camGame.angle', (turn == true and -3 or 3))
        setProperty('camHUD.angle',(turn == true and -3 or 3))

        doTweenAngle('ang1','camGame',0,1,'expoOut')
        doTweenAngle('ang2','camHUD',0,1,'expoOut')


    end
end